>add by jzf@2019-12-26

# c++代码生成脚本

## 起源

最近接受了一项任务，对一些数据结构进行实现。例子见demo.cpp

任务的内容是将提供的.h中的数据结构中含有的方法进行实现。 

大部分的函数都是一套模板，替换一下变量，类型，枚举。但一个工程里，即便是

## 目的

目前的脚本实现起来，还不如用手copy修改耗时短。

做一套框架，为以后批量生成代码做准备

## 经历和实现

### 技术选型

正则
字符串格式化

### xx

我目前的方式纯过程式的，一次实现500多行，并且每一个新的cpp都要新增和删除不小工作量的代码

后来，

写着写着，感觉这玩意和词法分析有相似之处，就去看了下编译原理。受到了一些启发，但是没有什么进展，在这里进行一下汇总，和实现尝试。


#### 分析
以行来分析

* 函数
    * 全局函数
    * 静态成员函数
    * 构造函数
    * 析构函数
    * 运算符重载函数
* 变量
    * 全局变量
    * 静态变量
    * 类成员变量
    * 局部变量
    * 函数参数
    * 

* 类型
    * 基础类型
    * 指针类型
    * 复合类型
        * class
        * struct
    * 其他类型
        * enum
        * union
* 其他
    * { } ;这类符号
    * public 等
    * // 注释等
    * 空白行
    * 

以块来分析

* 函数体
* 类定义
    * 
* 宏定义
* 注释块

以及几种扫描情形，打算通过正则进行处理
### 建模

实际上操作都是在对应的块内进行操作。

Context
{
    MetaWordType //是类还是函数还是不在块
}
MetaWordType
{
    ObjType
    Function
    Variant
}





